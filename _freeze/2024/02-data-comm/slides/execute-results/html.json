{
  "hash": "2041258028aa026b0e2248279e442868",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Effective Data Communication With {ggplot2}\nsubtitle: Part II - Putting theory into practice\nauthor: Renata Diaz\ndate: 2024-06-13\nformat: \n  uaz-revealjs:\n  # revealjs:\n    incremental: true\ncss: custom.css\n---\n\n\n## Learning Objectives\n\n-   Implement principles of effective design using {ggplot}. Including:\n-   Maximize data:ink ratio using themes and facets\n-   Customize marks and channels using geoms and aes(thetics).\n-   Use helper tools including `cols4all` and `esquisse` to make thoughtful visualization choices.\n-   Work through an example as a group.\n\n## Maximizing data:ink ratio\n\n## The {ggplot2} default\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \n                     bill_depth_mm,\n                     color = species)) +\n  geom_point() \n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n\n## {theme\\_\\*}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \n                     bill_depth_mm,\n                     color = species)) +\n  geom_point() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n\n## {theme\\_\\*}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \n                     bill_depth_mm,\n                     color = species)) +\n  geom_point() +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n## {theme\\_\\*}\n\nFor a complete list of preset themes:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n?theme_void\n```\n:::\n\n\n[Or online here.](https://ggplot2.tidyverse.org/reference/ggtheme.html)\n\n## {theme\\_\\*}\n\n::: callout-important\n`theme_bw()` and `theme_minimal` can remove a lot of unnecessary ink with one fell swoop.\n\nUse `theme_set(theme_bw())` outside your plot code to set the theme for a whole script or notebook.\n:::\n\n## Modify a theme\n\n-   The preset themes either leave unnecessary ink, or remove necessary information.\n-   The `theme()` function allows you to modify individual elements of a theme\n-   The `theme` options are vast. We'll break it down.\n\n## Anatomy of `theme` {.smaller}\n\n- `theme( <part of the plot> = <element_*(element_options)>)`\n- Parts of the plot: axis, legend, panel, plot, strip.\n- Elements: element_blank, element_text, element_line, element_rect.  \n- You can modify all lines/rectangles at once using `theme(line = element_line())`, etc. \n- See the [rendered documentation](https://ggplot2.tidyverse.org/reference/theme.html) to help you figure out how to change specific elements.\n\n## Remove the background panel\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) \n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Re-add grid lines\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\ntheme(panel.grid.major = element_line(color = \"black\", linewidth = .5))\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n\n\n## Hierarchichal modifications\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\ntheme(panel.grid.major.x = element_line(color = \"black\", linewidth = .5)) # Modify only the x axis\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n## Maximizing use of space\n\n## `facet_wrap` \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_wrap(vars(island))\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n## `facet_wrap` \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_wrap(vars(island), ncol = 1)\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n\n## `facet_grid`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_grid(rows = vars(island), cols = vars(sex))\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\n\n## Modify facet label placement\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_grid(rows = vars(island), cols = vars(sex), switch = \"y\")\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n\n## Modify facet scales\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_grid(rows = vars(island), cols = vars(sex), switch = \"y\", scales = \"free_y\")\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n\n## Modify facet scales\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_grid(rows = vars(island), cols = vars(sex), switch = \"y\", scales = \"free_y\")\n```\n:::\n\n\n::: callout-important\nUse judiciously!\n:::\n\n\n## Modify facet strip options\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_grid(rows = vars(island), cols = vars(sex), switch = \"y\") +\ntheme(strip.background = element_blank())\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n## Move the legend\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm,\ncolor = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) +\nfacet_grid(rows = vars(island), cols = vars(sex), switch = \"y\") +\ntheme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-16-1.png){width=960}\n:::\n:::\n\n## Marks and channels {.smaller}\n\n- Marks correspond to `geoms`\n  - `geom_point, geom_line, geom_col, ...`\n- We map marks to data using `aes` (aesthetics):\n  - `x` and `y` for position\n  - `color` and `fill` for color scale\n  - Discrete or continuous\n  - `alpha` for opacity\n  - `size` for size\n- Aesthetics can be set manually, if not mapped to data. \n\n\n## Counterintuitive marks and channels\n\nSize is much worse than position for showing continuous data!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(sex, species, size = body_mass_g)) +\ngeom_jitter() +\ntheme(panel.background = element_blank())\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-17-1.png){width=960}\n:::\n:::\n\n\n\n## Counterintuitive marks and channels\n\nSize is much worse than position for showing continuous data!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g)) +\ngeom_histogram() +\ntheme(panel.background = element_blank()) +\nfacet_grid(rows = vars(species),\ncols = vars(sex), \nswitch = \"y\")\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-18-1.png){width=960}\n:::\n:::\n\n\n\n## Marks and channels: Options\n\nShape is less effective than color for differentiating categories!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm, shape = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) \n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-19-1.png){width=960}\n:::\n:::\n\n\n## Marks and channels: Options\n\nShape is less effective than color for differentiating categories!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(body_mass_g, \nbill_depth_mm, color = species)) +\ngeom_point() +\ntheme(panel.background = element_blank()) \n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-20-1.png){width=960}\n:::\n:::\n\n\n## Effective color scales\n\n- There are multitudes of color palettes available for R.\n- Color palettes can be sequential, categorical, diverging, or bivariate.\n- Not all color palettes will be equally accessible to all viewers.\n- [Cols4All](https://mtennekes.github.io/cols4all/) helps you explore color palettes and find one to meet your needs. \n\n## `cols4all`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"cols4all\", dependencies = TRUE)\n\nlibrary(cols4all)\n\nc4a_gui()\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-22-1.png){width=960}\n:::\n:::\n\n\n## A data-to-viz helper: Esquisse\n\n- [`esquisse`](https://dreamrs.github.io/esquisse/) is a ggplot2 *extension* for exploring data-viz pairings\n- Stay tuned for session 3 for more on extensions!\n\n\n## Esquisse demo\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"esquisse\")\n\nesquisse::esquisser(penguins)\n```\n:::\n\n\n## Let's put it together\n\n- [Look at one of the example data tables here.](https://docs.google.com/spreadsheets/d/1U5OpOxM-aU8KV7xeqHaqsBoAV2koMYZYBCtNn7cCEFg/edit?gid=1285249029#gid=1285249029)\n- How would you visualize this? \n  - What channels (axes and aesthetics) and marks would you use?\n  - What features of the data would you emphasize?\n  - Would you use facets?\n  \n\n## Resources\n\n- [ggplot2 documentation](https://ggplot2.tidyverse.org/index.html)\n- [cols4all](https://mtennekes.github.io/cols4all/)\n- [esquisse](https://dreamrs.github.io/esquisse/)\n- CCT Data Science [drop-in hours](https://datascience.cct.arizona.edu/events/weekly-drop-hours-alvsce-researchers) (Tuesdays 9-10am)\n- [Data Science Incubator](https://datascience.cct.arizona.edu/incubator)\n\n## Next up: ggplot2 extensions!\n\n[More information and register here.](https://cct-datascience.github.io/ggplot2-workshop-series/2024/03-extensions/)",
    "supporting": [
      "slides_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}